<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>git flow 说明 | 洪旭的博客</title>
    <meta name="description" content="我的个人网站">
    <meta name="generator" content="VuePress 1.4.0">
    <link rel="icon" href="/logo.jpg">
    
    <link rel="preload" href="/assets/css/0.styles.884aa7e1.css" as="style"><link rel="preload" href="/assets/js/app.dbaf6f02.js" as="script"><link rel="preload" href="/assets/js/2.c8a22d89.js" as="script"><link rel="preload" href="/assets/js/6.5f9a17aa.js" as="script"><link rel="prefetch" href="/assets/js/3.8490c0d0.js"><link rel="prefetch" href="/assets/js/4.e6044ab6.js"><link rel="prefetch" href="/assets/js/5.3b394240.js"><link rel="prefetch" href="/assets/js/7.10828cfe.js"><link rel="prefetch" href="/assets/js/8.eed2c6cf.js">
    <link rel="stylesheet" href="/assets/css/0.styles.884aa7e1.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">洪旭的博客</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="https://github.com/farmerH" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="https://github.com/farmerH" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>移动端兼容</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/work-summary/" class="sidebar-link">技术框架</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>git使用总结</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="git-flow-说明"><a href="#git-flow-说明" class="header-anchor">#</a> git flow 说明</h1> <h2 id="提交代码"><a href="#提交代码" class="header-anchor">#</a> 提交代码</h2> <ul><li>长期存在两个分支：master 和 develop</li> <li>master 分支代表的是线上代码，禁止直接在 master 上进行commit</li> <li>develop 代表开发环境的代码，禁止直接在 develop 上直接进行commit</li> <li>分支/tag 禁止用中文或其他特殊字符，只用英文、数字、连接符。</li></ul> <h2 id="分支命名"><a href="#分支命名" class="header-anchor">#</a> 分支命名</h2> <ul><li>创建分支的时间+项目描述: 2019-06-01-1500/fix-download-url</li> <li>项目描述一定要清晰，至少结合两人的意见，禁止 fix/update/bugfix 之类的不清晰到描述</li></ul> <h2 id="tag-命名"><a href="#tag-命名" class="header-anchor">#</a> tag 命名</h2> <ul><li>打 tag 的时间 + 创建分支的时间 + 项目描述: 2019-06-03-1120/2019-06-01-1500/fix-download-url</li></ul> <h2 id="git-messsage"><a href="#git-messsage" class="header-anchor">#</a> git messsage</h2> <ul><li>新增：...文件/...功能</li> <li>修复：...功能/...bug</li> <li>优化：...功能/...样式/...体验</li> <li>删除：...文件/...功能</li> <li>更新：...文件/...功能</li> <li>测试（不建议）：增加用于测试的代码</li></ul> <h2 id="git-flow-流程"><a href="#git-flow-流程" class="header-anchor">#</a> git-flow 流程</h2> <h3 id="开发一个新的需求-例如新增页面、功能更新、ui更改等"><a href="#开发一个新的需求-例如新增页面、功能更新、ui更改等" class="header-anchor">#</a> 开发一个新的需求(例如新增页面、功能更新、UI更改等)</h3> <ul><li>在develop 分支执行 <code>git flow feature start 2019-05-30-1500/mayday</code></li> <li>此时会在本地开出一个 feature/2019-5-15-mayday 分支，我们可以把它 push 的远程git 仓库进行协作开发</li> <li>在项目开发过程中，所有的更改和提交都位于该 feature/2019-5-15-mayday 分支之上</li> <li>在开发完成之后，需要测试进入开始测试时</li> <li>在 feature 分支执行 <code>git flow feature finish 2019-05-30-1500/mayday</code> <ul><li>该操作会将该分支合并到 develop，同时删除该 feature 分支</li></ul></li> <li>如果此时他人也合并过分支，那么需要自己手动解决冲突</li></ul> <h3 id="需要测试该期需求"><a href="#需要测试该期需求" class="header-anchor">#</a> 需要测试该期需求</h3> <ul><li>此时 git flow 需要使用一个 release 分支进行时测试</li> <li>前提是 feature 分支已经完成，合并到了 develop</li> <li>在 develop 分支执行 <code>git flow release start 2019-05-30-1500/mayday</code> 创建一个 release</li> <li>之后测试出的问题，都是在该 release 分支进行修改和提交</li></ul> <h3 id="需要发布"><a href="#需要发布" class="header-anchor">#</a> 需要发布</h3> <ul><li>在测试完需求之后，需要上线</li> <li>在 release 分支执行 <code>git flow release finish 2019-05-30-1500/mayday</code> <ul><li>该操作会把该 release 分支同时合并到 develop 和 master 分支上去，同时删除该分支</li></ul></li> <li>注意：如果使用命令行进行操作，此时会在 vim 里打开关于 <code>commit message</code> 和 <code>tag message</code> 的说明，此时使用 <code>:q</code> 关闭即可</li> <li>此时 master 和 develop 上都是最新的代码，需要手动 <code>git push 到远程仓库</code></li> <li>git flow 此时会默认生成一个 tag <code>2019-05-30-1500/mayday</code> 注意我们不使用这个tag</li> <li>而是手动打个一个tag 使用 <code>git tag 2019-06-03-1120/2019-05-30-1500/mayday</code></li> <li>手动把该 tag push 到远程 <code>git push origin 2019-06-03-1120/2019-05-30-1500/mayday</code></li> <li>把 master 分支上的代码测试后即可发布上线</li></ul> <h3 id="需要修复问题"><a href="#需要修复问题" class="header-anchor">#</a> 需要修复问题</h3> <ul><li>在任何开发阶段，如果出现线上问题，那么就需要一个 hotfix 分支去修复</li> <li>在 master 上执行 <code>git flow hotfix start 2019-05-30-1500/fix-download-url</code> <ul><li>该操作会创建一个 hotfix 分支，我们在 hotfix 上面进行代码的线上问题的修复和提交</li></ul></li> <li>完成修复和测试后，需要发布该代码</li> <li>在 hotfix 分支执行 <code>git flow hotfix finish 2019-05-30-1500/fix-download-url</code> <ul><li>该操作会将该hotfix 分支的代码合并到master 和 develop 上去，同时删除该 hotfix 分支</li></ul></li> <li>git flow 此时会默认生成一个 tag <code>2019-05-30-1500/fix-download-url</code> 注意我们不使用这个tag</li> <li>而是手动打个一个tag 使用 <code>git tag 2019-06-03-1120/2019-05-30-1500/fix-download-url</code></li> <li>手动把该 tag push 到远程 <code>git push origin 2019-06-03-1120/2019-05-30-1500/fix-download-url</code></li> <li>把 master 分支上的代码测试后即可发布上线</li></ul> <h3 id="注意"><a href="#注意" class="header-anchor">#</a> 注意</h3> <ul><li>windows 上的命令行工具在 <code>git flow init</code> 时可能需要手动指定 prefix</li></ul> <h3 id="参考"><a href="#参考" class="header-anchor">#</a> 参考</h3> <ul><li><a href="https://danielkummer.github.io/git-flow-cheatsheet/index.zh_CN.html" target="_blank" rel="noopener noreferrer">git-flow备忘<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul> <h1 id="git常用命令"><a href="#git常用命令" class="header-anchor">#</a> git常用命令</h1> <h2 id="基础命令"><a href="#基础命令" class="header-anchor">#</a> 基础命令</h2> <h3 id="tag"><a href="#tag" class="header-anchor">#</a> tag</h3> <ul><li>增加一个标签 <code>git tag v1.0</code></li> <li>将标签推送到远程 <code>git push origin v1.0</code></li> <li>删除远程tag <code>git push --delete origin v2.8.3</code></li> <li>删除本地tag <code>git tag --d v2.8.3</code></li></ul> <h3 id="branch"><a href="#branch" class="header-anchor">#</a> branch</h3> <ul><li>删除一个本地分支 <code>git branch -D feature/~</code></li> <li>将本地的分支和远程的对应 <code>git branch --set-upstream-to=origin/develop</code></li> <li>切换分支的时候，将当前分支修改的内容一起打包带走，同步到切换的分支下。 <code>git checkout --merge &lt;branch&gt;</code></li> <li>删除本地的remote 分支 <code>git branch -dr origin/hotfix/2019-05-31-fix</code></li> <li>删除远程分支 <code>git push origin --delete hotfix/2019-05-31-fix</code></li> <li>设置远程分支：查看项目创建时的 readme</li> <li>基于远程仓库的分支创建新分支并且切换到新分支 <code>git checkout -b develop origin/develop</code></li></ul> <h3 id="stash"><a href="#stash" class="header-anchor">#</a> stash</h3> <ul><li>放弃尚未 add 的更改 <code>git checkout .</code> （checkout：切换分支 | 移除尚未  add 的修改）</li> <li>暂存当前修改 <code>git stash</code></li> <li>提取暂存到修改 <code>git stash pop</code></li></ul> <h3 id="git-问题"><a href="#git-问题" class="header-anchor">#</a> Git 问题</h3> <ul><li><p>[x] rm了文件，同时也想在 git 中不再追踪该文件</p> <ul><li><code>git rm file1</code></li> <li><code>git commit -am &quot;abc&quot;</code></li></ul></li> <li><p>[x] 忽略已追踪的文件</p> <ul><li>如果你已經對一個文件進行追蹤了很多个版本，此時在 ignore 里面忽略是没用的</li> <li>.gitignore只能忽略那些原来没有被track的文件</li> <li>正确的做法应该是：git rm --cached logs/xx.log，然后更新 .gitignore 忽略掉目标文件，最后 git commit -m &quot;We really don't want Git to track this anymore!&quot;</li></ul></li> <li><p>[x] 本地对某些公共文件做了本地化的配置，希望可以 pull 和 Merge，但是不要提交修改</p> <ul><li>用 .gitignore 忽略掉这个本地的 config.json，然后在代码里 try load 这个配置，如果失败，就使用公共的配置</li></ul></li></ul> <h3 id="其他"><a href="#其他" class="header-anchor">#</a> 其他</h3> <ul><li><code>git config --global user.name &quot;Your Name”</code></li> <li><code>git config --global user.email &quot;email@example.com”</code> //全局的名称和邮箱设置</li> <li><code>git diff test.md</code> //查看两次文件之间的差异</li> <li>在git 中使用<code>HEAD</code>来表示当前版本，上一个版本则是HEAD^,上上个HEAD^^,上100个HEAD~100</li> <li><code>git reset —-hard HEAD^</code> //将版本回退到上一个版本，此时index指向该版本，该版本之后的版本不会再log里面显示，但是可以通过commit id进行恢复</li> <li><code>git reset —-hard 21e20ce</code> //id没有必要写完全，但要避免重复</li> <li><code>git reflog</code> //reflog纪录每一次的命令</li></ul></div> <footer class="page-edit"><!----> <!----></footer> <!----> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.dbaf6f02.js" defer></script><script src="/assets/js/2.c8a22d89.js" defer></script><script src="/assets/js/6.5f9a17aa.js" defer></script>
  </body>
</html>
